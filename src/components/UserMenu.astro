---
interface Props {
  isLoggedIn?: boolean;
}

const { isLoggedIn = false } = Astro.props;
---

<div class="relative ml-4" x-data="{ open: false }">
  <button
    @click="open = !open"
    class="flex items-center justify-center w-10 h-10 rounded-full bg-gray-100 hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"
  >
    {isLoggedIn ? (
      <img
        src="/default-avatar.png"
        alt="User avatar"
        class="w-8 h-8 rounded-full"
      />
    ) : (
      <svg
        class="w-6 h-6 text-gray-600"
        fill="none"
        stroke="currentColor"
        viewBox="0 0 24 24"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"
        />
      </svg>
    )}
  </button>

  <div
    x-show="open"
    @click.away="open = false"
    class="absolute right-0 mt-2 w-48 py-2 bg-white rounded-md shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none"
    role="menu"
  >
    {isLoggedIn ? (
      <>
        <a
          href="/profile"
          class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"
          role="menuitem"
        >
          Your Profile
        </a>
        <a
          href="/settings"
          class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"
          role="menuitem"
        >
          Settings
        </a>
        <button
          type="button"
          class="block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"
          role="menuitem"
        >
          Sign out
        </button>
      </>
    ) : (
      <>
        <a
          href="/login"
          class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"
          role="menuitem"
        >
          Sign in
        </a>
        <a
          href="/register"
          class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"
          role="menuitem"
        >
          Create account
        </a>
        <div class="border-t border-gray-100 my-1"></div>
        <a
          href="/subscribe"
          class="block px-4 py-2 text-sm text-indigo-600 hover:bg-gray-100"
          role="menuitem"
        >
          Subscribe to Pro
        </a>
      </>
    )}
  </div>
</div>

<script>
  import 'alpinejs';
</script>